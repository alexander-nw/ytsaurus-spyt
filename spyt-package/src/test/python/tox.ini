[tox]
min_version=4
envlist = py39, py311, py312
skipsdist = True

[testenv]
deps =
    pytest==8.2.1
    pytest-timeout==2.3.1
    unittest2==1.1.0
    ytsaurus-client==0.13.15
    ytsaurus-yson==0.4.8
commands =
    bash -c 'set -e; \
             pip install $(find ../../../target/python/dist -type f -name "*.whl"); \
             source spyt-env; \
             pytest --durations=0 -s --timeout=20 {posargs:pytest -v}'
allowlist_externals =
    bash
